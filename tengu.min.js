function Tengu(){var e,t=Array.prototype.slice.call(arguments),n=t.pop(),r=t[0]&&"string"==typeof t[0]?t:t[0];if(!(this instanceof Tengu))return new Tengu(r,n);if(this.a=0,!r||"*"===r){r=[];for(e in Tengu.modules)Tengu.modules.hasOwnProperty(e)&&r.push(e)}for(e=0;e<r.length;e+=1)Tengu.modules[r[e]](this);n(this)}var VERSION_NUMBER="3.00012";console.log("Loading Tengu v"+VERSION_NUMBER);var ISNODE,ROOT;!function(){ROOT=this;var e=new Object,t=!1;"undefined"!=typeof module&&module.exports?(module.exports=e,ROOT._=e,t=!0):ROOT._=e}(),Tengu.protoype={name:"Tengu JS",version:VERSION_NUMBER,getName:function(){return this.name},getVersion:function(){return VERSION_NUMBER}},Tengu.modules={},Tengu.modules.template=function(e){e.method=function(){}},Tengu.modules.debug=function(e){var t=[],n=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},r=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var t=new Error;Error.captureStackTrace(t,arguments.callee);var n=t.stack;return Error.prepareStackTrace=e,n},o=function(){return r()[1].getLineNumber()},i=function(){var e=o(),n=[],r=arguments[0];return t[e]>=r?!1:void(arguments.length<2||"number"!=typeof r?console.log.apply(console,arguments):(t[e]||(t[e]=0),t[e]+=1,Array.prototype.push.apply(n,arguments),n.shift(),console.log.apply(console,n)))};e.stackTrace=function(){return r()},e.lineNumber=function(){return o()},e.log=function(){console.log.apply(console,arguments)},e.logMultiple=function(){i.apply(this,arguments)},e.logOnce=function(){var e=o();return t[e]?!1:(t[e]=1,void console.log.apply(console,arguments))},e.encodeURI=function(e){var t=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]),n+="&");return n.substring(0,n.length-1)},n=typeof e;switch(n){case"object":return t(e);case"string":return encodeURIComponent(e);default:throw new Error("Tengu.encodeURI - Bad data type:",n)}return!1},e.safeWrap=function(e,t,r,o){return function(){try{if(n(e))return e.apply(this,arguments);if(n(r))r();else if(null!=r)throw new TypeError("T.safeWrap: func is not a function, func: "+e)}catch(i){if(!n(t))throw i;t(i)}finally{n(o)&&o()}}}},Tengu.modules.string=function(e){e.numToString=function(e,t){if(t=t||"0.00",void 0==e)return void 0;if(null==e)return null;var n,r=(""+e).split("."),o=t.split("."),i=[2];for(n=o[0].length-r[0].length,i[0]="";n>0;)i+="0",n-=1;for(i[0]+=r[0],n=o[1].length-r[1].length,void 0==r[1]&&(r[1]=""),void 0==o[1]&&(o[1]=""),i[1]=r[1];n>0;)i[1]+="0",n-=1;return 0>n&&(i[1]=r[1].slice(0,o[1].length)),i[0]+"."+i[1]},e.numToString_minDigits=function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},e.capitalizeFirstLetter=function(e){return e=e.toLowerCase(),e.charAt(0).toUpperCase()+e.slice(1)},e.htmlColorString=function(t,n,r,o){var i="";return e.isString(n)||(n="span"),i+="<"+n+" style=",i+='"',e.isString(o)&&(i+="background: "+o),e.isString(r)&&(i+=";",i+="color: "+r),i+='"',i+=">",i+=t,i+="</"+n+">"},e.htmlRenderPercent=function(t,n){void 0==n&&(n=2),t*=100;var r="",o="black";return t>0?(r+="+",o="green"):0>t&&(o="red"),r+=t.toFixed(n),r+="%",e.htmlColorString(r,void 0,o,void 0)};var t=function(n,r){if(!e.isArray(n))return n;e.isNumber(r)||(r=2),r=Math.floor(r);var o,i,a="[";for(i=n.length,o=0;i>o;o+=1)o>0&&(a+=","),a+=e.isNumber(n[o])?n[o].toFixed(r):e.isArray(n[o])?t(n[o],r):n[o];return a+="]"};e.arrayToFixed=function(e,n){return t(e,n)}},Tengu.modules.sparkline=function(e){e.SPARKLINE_LEFT=["_","▏","▎","▍","▌","▋","▊","▉","█"],e.sparklineLeft=function(t,n){var r,o,i,a="",u=1/n;for(r=0;n>r;r+=1)o=r*u,o>t?a+=e.SPARKLINE_LEFT[0]:t>=o+u?a+=e.SPARKLINE_LEFT[8]:(i=Math.floor((t-o)*n),a+=e.SPARKLINE_LEFT[i]);return a}},Tengu.modules.validation=function(e){e.validateDate=function(e){var t=e;if(""==t)return!1;var n=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,r=t.match(n);if(null==r)return!1;if(dtMonth=r[1],dtDay=r[3],dtYear=r[5],dtMonth<1||dtMonth>12)return!1;if(dtDay<1||dtDay>31)return!1;if((4==dtMonth||6==dtMonth||9==dtMonth||11==dtMonth)&&31==dtDay)return!1;if(2==dtMonth){var o=dtYear%4==0&&(dtYear%100!=0||dtYear%400==0);if(dtDay>29||29==dtDay&&!o)return!1}return!0}},Tengu.modules.namegen=function(e){var t,n,r=20,o=3,i={},a=function(t){var n,r={loc:[],next:[]};for(n in t.loc)r.loc[n]=e.normalize(t.loc[n]);for(n in t.next)r.next[n]=e.normalize(t.next[n]);return r},u={nextScalar:.5,locScalar:.5,randScalar:0},s=1/27,c=function(){return Math.random()};t="bcdfghjklmnpqrstvwxyz".split(""),n="aeiou".split(""),e.getRandomConsonant=function(){return e.randArrayValue(t,c)},e.getRandomVowel=function(){return e.randArrayValue(n,c)},e.namegenSetRFunc=function(e){c=e},e.makeNationName=function(){var t="",n=Math.floor(4*Math.random());switch(t+=e.getRandomConsonant(),t+=e.getRandomVowel(),t+=e.getRandomConsonant(),0!=n&&(t+=e.getRandomVowel(),t+=e.getRandomConsonant()),n){case 0:t+="land";break;case 1:t+="ia";break;case 2:t+="y";break;case 3:t+=""}return e.capitalizeFirstLetter(t)},e.namegenLearn=function(t){var n,r,o,i,a,u,s,c=[],l=[],f=null;for(n=0;27>n;n+=1)l[n]=e.zeroArray(27);for(i=t.length,n=0;i>n;n++){for(u=t[n].replace("[^a-zA-Z]","").toUpperCase(),a=t[n].length,f=26,r=0;a>r;r++)s=u.charCodeAt(r)-65,void 0===c[r]&&(c[r]=e.zeroArray(27)),c[r][s]+=1,l[f][s]+=1,f=s;if(void 0===c[r])for(c[r]=[27],o=0;27>o;o+=1)c[r][o]=0;c[r][26]+=1,null==f?l[26][26]+=1:l[f][26]+=1}return{loc:c,next:l}},e.namegenUpdate=function(e){i=a(e)},e.namegenCreate=function(){var t,n,a,l,f=u.nextScalar,d=u.locScalar,h=u.randScalar,g=s,m=i.next,v=i.loc,w=!1,p=0,y=[],b=26,x=e.zeroArray(27),T="";for(x[26]=1;!w;){for(y=e.zeroArray(27),n=27,t=0;n>t;t+=1)y[t]+=m[b][t]*f,y[t]+=p>v.length-1?x[t]*d:v[p][t]*d,y[t]+=g*h;for(o>p&&(y[26]=0,y=e.normalize(y)),a=c(),l=0,t=0;a>=l;)l+=y[t],t+=1;t-=1,t>=26?w=!0:(T+=String.fromCharCode(t+65),b=t,T.length>=r&&(w=!0)),p+=1}return T}},Tengu.modules.math=function(e){e.sign=function(e){return"number"==typeof e?e?0>e?-1:1:e===e?0:0/0:0/0},e.isEven=function(e){return e%2==0},e.isOdd=function(t){return!e.isEven(t)},e.rez=function(e,t){return Math.floor(e/t)*t},e.nInRange=function(e,t,n){return 0>(e-t)*(e-n)},e.capNumber=function(e,t,n){return"number"!=typeof e&&console.warn(""+e+" is not a number!"),void 0!=t&&t>e?t:void 0!=n&&e>n?n:e},e.logrithm=function(){var e=Math.log;return function(t,n){return e(t)/(n?e(n):1)}}(),e.pointRect=function(e,t,n){return!(e>n.x+n.w|e<n.x|t>n.y+n.h|t<n.y)},e.pointDir=function(e,t,n,r){var o=n-e,i=r-t,a=Math.atan2(-i,o);return a},e.pointDisSq=function(e,t,n,r){var o=n-e,i=r-t;return o*o+i*i},e.pointDis=function(t,n,r,o){return Math.sqrt(e.pointDisSq(t,n,r,o))},e.lineIntersect1D=function(e,t,n,r){var o=e+t,i=n+r;return!(o>n||e>i)},e.boundlessLineIntersect2D=function(e,t,n,r){var o,i,a=e-n,u=r-t;return 0==a?null:(o=u/a,i=e*o+t,{x:o,y:i})},e.rectIntersect2D=function(){},e.bitArrayToByte=function(e,t){t&&e.reverse();var n,r=0;for(n=0;8>n;n+=1)e[n]&&(r+=Math.pow(2,n));return r},e.byteToBitArray=function(e,t){var n,r=[];for(n=0;8>n;n+=1)r[n]=a>>n&1;return t&&r.reverse(),r},e.rollmean=function(e,t,n){return t+n*(e-t)},e.statistics=function(t){if(!e.isArray(t))return console.warn("T.statistics - invalid array:",t),!1;if(t.length<1)return console.warn("T.statistics - array is empty:",t),!1;var n,r,o=function(t){var n,r,o=0;for(n in t)r=t[n],e.isValidNum(r)&&(o+=r);return o/=t.length},i=function(t,n){var r,o,i,a=0;for(r in t)o=t[r],e.isValidNum(o)&&(i=o-n,a+=i*i);return a/(t.length-1)};return n=o(t),r=i(t,n),{mean:n,v:r,sd:Math.sqrt(r),ss:t.length}}},Tengu.modules.regression=function(e){var t=function(){this.count=0,this.sumX=0,this.sumX2=0,this.sumX3=0,this.sumX4=0,this.sumY=0,this.sumXY=0,this.sumX2Y=0};t.prototype={add:function(e,t){this.count++,this.sumX+=e,this.sumX2+=e*e,this.sumX3+=e*e*e,this.sumX4+=e*e*e*e,this.sumY+=t,this.sumXY+=e*t,this.sumX2Y+=e*e*t},project:function(e){var t=this.count*this.sumX2*this.sumX4-this.count*this.sumX3*this.sumX3-this.sumX*this.sumX*this.sumX4+this.sumX2*this.sumX*this.sumX2*this.sumX3-this.sumX2*this.sumX2*this.sumX2,n=this.sumX*this.sumX2Y*this.sumX3-this.sumX*this.sumX4*this.sumXY-this.sumX2*this.sumX2*this.sumX2Y+this.sumX2*this.sumX3*this.sumXY+this.sumX2*this.sumX4*this.sumY-this.sumX3*this.sumX3*this.sumY,r=-this.count*this.sumX2Y*this.sumX3+this.count*this.sumX4*this.sumXY+this.sumX*this.sumX2*this.sumX2Y-this.sumX*this.sumX4*this.sumY-this.sumX2*this.sumX2*this.sumXY+this.sumX2*this.sumX3*this.sumY,o=this.sumY*this.sumX*this.sumX3-this.sumY*this.sumX2*this.sumX2-this.sumXY*this.count*this.sumX3+this.sumXY*this.sumX2*this.sumX-this.sumX2Y*this.sumX*this.sumX+this.sumX2Y*this.count*this.sumX2;return(n+e*r+e*e*o)/t}};var n=function(e,t){var n=0,r=0,o=0,i=0,a=0,u=0,s=0,c=e.length;if(c!=t.length)throw new Error("The parameters values_x and values_y need to have same size!");if(0===c)return[[],[]];for(var l=0;c>l;l++)u=e[l],s=t[l],n+=u,r+=s,i+=u*u,o+=u*s,a++;var f=(a*o-n*r)/(a*i-n*n),d=r/a-f*n/a;return f*c+d};e.findLineByLeastSquares=function(e,t){return n(e,t)}},Tengu.modules.fingerprint=function(e){if("undefined"==typeof window)return!1;var t=function(t,n,r){if(!e.isObject(t)||!e.isArray(r))return console.error("Tengu fingerprint - _mapData, bad objects or schema",t,e.isObject(t),r,e.isArray(r)),n;e.isObject(n)||(n={});var o,i;for(o in r)i=r[o],n[i]=t[i];return n},n=function(e){var n=["appCodeName","appName","appVersion","cookieEnabled","doNotTrack","hardwareConcurrency","language","languages","maxTouchPoints","mimeTypes","platform","plugins","product","productSub","userAgent","vendor","vendorSub"];return t(window.navigator,e,n)},r=function(e){var n=["availHeight","availLeft","availTop","availWidth","colorDepth","height","pixelDepth","width"];return t(window.screen,e,n)},o=function(e){var t=window.screen.width,n=window.screen.height;return t>n?(e.screen_long=t,e.screen_short=n):(e.screen_long=n,e.screen_short=t),e},i=function(){var e={};return e=n(e),e=r(e),e=o(e)};e.getDeviceData=function(){return i()}},Tengu.modules.sha3_512=function(e){e.sha3_512=function(){},e.saltySha3=function(){}},Tengu.modules.physics=function(e){e.getDisVTA=function(e,t,n){var r,o=t*t;return r=e*t+.5*n*o}},Tengu.modules.random=function(e){var t=279470273,n=[],r=function(){var t,r,o,i,a;do t=2*e.prFloat()-1,r=2*e.prFloat()-1,o=t*t+r*r;while(o>=1);o=Math.sqrt(-2*Math.log(o)/o),i=t*o,a=r*o,n.push(i),n.push(a)};e.uInt32=function(e){return e=Math.abs(e),e=Math.round(e),e%=4294967296},e.randomSeed=function(){return e.uInt32(4294967296*Math.random())},e.hash=function(t){return t=e.uInt32(t),t+=~(t<<15),t^=t>>10,t+=t<<3,t^=t>>6,t+=~(t<<11),t^=t>>16},e.makeSeed=function(){var t,n,r=Array.prototype.slice.call(arguments),o=function(){var t=r.pop(),n=e.uInt32(t);return e.hash(n)};if(r.length<=0)return e.randomSeed();for(t=o();r.length>0;)n=o(),t=e.hash(t^n);return t},e.lehmer=function(e){return 279470273*e%4294967291},e.seed=function(e){return n=[],t=e},e.prng=function(){var n=e.lehmer(t);return t=n,n},e.prFloat=function(){return e.prng()/4294967296},e.prBool=function(){return e.prng()>=2147483648},e.prInt=function(t,n){var r=e.prng();return void 0===n&&(n=0),r/=4294967296,r*=t-n,r=Math.floor(r),r+=n},e.prGauss=function(){return n.length<=0&&r(),n.pop()}},Tengu.modules.util=function(e){var t=function(){if("undefined"!=typeof window){var e=window.location.pathname,t=e.lastIndexOf("/")+1;return e=e.slice(0,t)}if(ISNODE){var n=require("path"),e=n.dirname(process.execPath),t=e.lastIndexOf("/")+1;return e=e.slice(0,t)}}();e.argArray=function(e){return Array.prototype.slice.call(e,0)},e.getWorkingDir=function(){return t},e.versionToFloat=function(e){var t=e.indexOf("."),n=e.slice(0,t).replace(/\D/g,""),r=e.slice(t).replace(/\D/g,""),o=n+"."+r;return parseFloat(o)},e.isUpperCase=function(e){return e==e.toUpperCase()},e.isLowerCase=function(e){return e==e.toLowerCase()},e.isString=function(e){if(!e)return!1;var t=Object.prototype.toString;return"[object String]"==t.call(e)},e.isNumOrString=function(t){return e.isValidNum(t)?!0:e.isString(t)?!0:!1},e.isArray=function(e){if(!e)return!1;var t=Object.prototype.toString;return"[object Array]"==t.call(e)},e.isFunction=function(e){if(!e)return!1;var t={};return e&&"[object Function]"===t.toString.call(e)},e.isObject=function(e){return e?"object"==typeof e:!1},e.isValidNum=function(e){return null==e?!1:isNaN(e)?!1:0/0==e?!1:"number"==typeof e},e.isNumber=e.isValidNum,e.isValidNumber=e.isValidNum,e.isInt=function(t){return e.isValidNum(t)?t%1==0:!1},e.shuffle=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),r-=1,t=e[r],e[r]=e[n],e[n]=t;return e},e.randArrayValue=function(e,t){t=t||Math.random;var n=e.length,r=Math.floor(t()*n);return e[r]},e.indexObjArray=function(e){var t,n;for(n=e.length,t=0;n>t;t+=1)e[t].index=t;return e},e.search=function(e,t,n){var r,o,i=[];for(o=e.length,r=0;o>r;r+=1)void 0!=e[r]&&e[r][t]==n&&i.push(r);return i},e.searchIndexOf=function(t,n,r){var o=e.search(t,n,r);return o.length>0?o[0]:-1},e.arrayRemoveValue=function(e){for(var t,n,r=(arguments,e.length);r>1&&e.length;)for(t=e[--r];-1!==(n=e.indexOf(t));)e.splice(n,1);return e},e.appendArray=function(e,t){return Array.prototype.push.apply(e,t)},e.stringReplaceAll=function(e,t,n,r){return e.replace(new RegExp(t.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),r?"gi":"g"),"string"==typeof n?n.replace(/\$/g,"$$$$"):n)},e.safeDQuoteString=function(t){e.stringReplaceAll(t,'"','\\"');return e.stringReplaceAll(t,"\\","\\\\")},e.sort=function(){"use strict";return function(e,t){for(var n=0,r=e.length;r>n;n++){for(var o=n,i=e[o][t],a=e[o];o>0&&e[o-1][t]>i;o--)e[o]=e[o-1];e[o]=a}return e}}(),e.keyNverse=function(e){var t,n,r={};for(t in e)n=e[t],r[n]=t;return r},e.zeroArray=function(e){var t,n=[];for(t=0;e>t;t+=1)n.push(0);return n},e.emptyStringArray=function(e){var t,n=[];for(t=0;e>t;t+=1)n.push("");return n},e.normalize=function(e){var t,n,r,o=0;for(n=e.length,t=0;n>t;t+=1){if("number"!=typeof e[t])throw new Error("Array["+t+"] is not a number!  Val:"+e[t]);o+=e[t]}if(0==o)for(r=1/n,t=0;n>t;t+=1)e[t]=r;else for(t=0;n>t;t+=1)e[t]/=o;return e},e.object=function(e){function t(){}return t.prototype=e,new t},e.clone=function(e){return e?e instanceof Array?e.slice(0):JSON.parse(JSON.stringify(e)):e},e.cloneDeep=function(e){return e?e instanceof Array?e.slice(0):jQuery.extend(!0,{},e):e},e.parseCSV=function(t,n){var r,o,i,a,u=t.split("\n");e.isString(n)&&(o=n.split(","),r=[]);for(i in u){void 0!=o&&(r[i]={}),u[i]=u[i].split(",");for(a in u[i])void 0!=o&&(r[i][o[a]]=u[i][a])}return void 0!=o?r:u},e.mapObj=function(e,t){var n;for(n in e)t[n]=e[n];return t},e.objToArray=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},e.makeGetter=function(t,n){var r,o=t,i={};for(r in o)i[r]=function(){var t=r;return function(){return e.isFunction(o[t])&&n?void o[t].apply(this,arguments):o[t]}}();return i},e.bind=function(e,t){return function(){t.apply(e,arguments)}},e.createCallback=function(e,t){return function(n){t.call(e,n)}},e.binToString=function(e){var t=e;if(t.byteLength%2>0,!(t instanceof ArrayBuffer))throw new Error("T.webstorage: Invalid ArrayBuffer",t);return String.fromCharCode.apply(null,new Uint16Array(t))},e.stringToBin=function(e){var t,n,r=new ArrayBuffer(2*e.length),o=new Uint16Array(r);for(n=e.length,t=0;n>t;t+=1)o[t]=e.charCodeAt(t);return r},e.rgba=function(e){var t,n,r,o,i=e.replace("#",""),a=[];for(n=0;4>n;n+=1){if(r=2*n,t=i.slice(r,r+2),o=parseInt(t,16),"number"!=typeof o)throw new Error("Invalid rgba color string: "+e);a.push(o)}return a[3]/=256,"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},e.rgbToString=function(e,t,n){return e&&void 0===t&&void 0===n&&(t=e.g,n=e.b,e=e.r),"rgb("+Math.round(e)+","+Math.round(t)+","+Math.round(n)+")"},e.hsvToRgb=function(e,t,n){var r,o,i,a,u,s,c,l;switch(e&&void 0===t&&void 0===n&&(t=e.s,n=e.v,e=e.h),a=Math.floor(6*e),u=6*e-a,s=n*(1-t),c=n*(1-u*t),l=n*(1-(1-u)*t),a%6){case 0:r=n,o=l,i=s;break;case 1:r=c,o=n,i=s;break;case 2:r=s,o=n,i=l;break;case 3:r=s,o=c,i=n;break;case 4:r=l,o=s,i=n;break;case 5:r=n,o=s,i=c}return{r:Math.floor(255*r),g:Math.floor(255*o),b:Math.floor(255*i)}},e.getHReffromString=function(t,n){if("undefined"==typeof window)return console.error("window doesn't exist, not in browser"),null;var r="text/plain";e.isString(n)&&(r=n),window.URL=window.webkitURL||window.URL;{var o=new Blob([t],{type:r});document.getElementById("dlLink")}return window.URL.createObjectURL(o)},e.getDLURLfromString=function(t,n,r){if("undefined"==typeof window)return console.error("window doesn't exist, not in browser"),null;var o="text/plain";e.isString(r)&&(o=r),window.URL=window.webkitURL||window.URL;var i=new Blob([t],{type:o}),a=document.getElementById("dlLink");a.download=n,a.href=window.URL.createObjectURL(i),a.click(),a.download="",a.href=""},e.randomBool=function(){return Math.random()<.5},e.disableRightClick=function(){function e(){return document.all?!1:void 0}function t(e){return!(document.layers||document.getElementById&&!document.all)||2!=e.which&&3!=e.which?void 0:!1}document.layers?(document.captureEvents(Event.MOUSEDOWN),document.onmousedown=t):(document.onmouseup=t,document.oncontextmenu=e),document.oncontextmenu=new Function("return false")},e.getScreenResolution=function(){return{w:screen.width,h:screen.height}}},Tengu.modules.afk=function(e){if("undefined"==typeof window)return!1;if("undefined"==typeof $)return!1;var t=[],n=function(e){e.timeout&&window.clearTimeout(e.timeout);try{e.timeout=window.setTimeout(e.callback,e.duration)}catch(t){throw console.log(t),t}},r=function(){var e;for(e in t)t[e]&&n(t[e])},o=function(e,r){var o=t.length;return t[o]={duration:r,callback:e},n(o),o},i=function(e){var n=t[e];n.timeout&&window.clearTimeout(n.timeout),t[e]=void 0};$(document).ready(function(){var e,t,n=["pointerdown","pointerup","pointermove","onkeydown"];for(t=n.length,e=0;t>e;e+=1)window.addEventListener(n[e],r)}),e.clearAfk=function(e){i(e)},e.afk=function(e,t){return o(e,t)}},Tengu.modules.cookie=function(e){e.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="expires="+r.toGMTString();document.cookie=e+"="+t+"; "+o},e.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}},Tengu.modules.webworker=function(e){e.startWorker=function(e,t){var n;if("undefined"==typeof Worker)throw new Error("Browser does not support Web Workers");n=new Worker(e),n.onmessage=function(e){t(e.data)}},e.stopWorker=function(e){e.terminate()}},Tengu.modules.stream=function(e){var t=2,n=function(){return void 0!==DataView},r=function(){if(n){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}return void 0},o=null,i=0,a=[],u=a,s=function(){return u},c=function(e){switch(e){case"uint8":return 1;case"uint16":return 2;case"uint32":return 4;default:throw new Error("Unknown size of type: "+e)}},l=function(e){var t,n,r=0;for(e=e||s(),n=e.length,t=0;n>t;t+=1)r+=c(e[t].type);return r},f=function(e,t,n,r){switch(t){case"uint8":return e.getUint8(n);case"uint16":return e.getUint16(n,r);case"uint32":return e.getUint32(n,r);case"int8":return e.getInt8(n);case"int16":return e.getInt16(n,r);case"int32":return e.getInt32(n,r);case"float32":return e.getFloat32(n,r);case"float64":return e.getFloat64(n,r);default:throw new Error("Bad DataView Type: "+t)}return e},d=function(e,t,n,r){switch(n){case"uint8":e.setUint8(r,t);break;case"uint16":e.setUint16(r,t);break;case"uint32":e.setUint32(r,t);break;case"int8":e.setInt8(r,t);break;case"int16":e.setInt16(r,t);break;case"int32":e.setInt32(r,t);break;case"float32":e.setFloat32(r,t);break;case"float64":e.setFloat64(r,t);break;default:throw new Error("Bad DataView Type: "+n)}return e},h=function(){var e,n,r,o,i,a,u=0;for(e=s(),n=l();n%t>0;)w(0,"uint8"),n+=1;for(r=new ArrayBuffer(n),o=new DataView(r),a=e.length,i=0;a>i;i+=1)d(o,e[i].value,e[i].type,u),u+=c(e[i].type);return console.log("Binary created - "+r.byteLength+" bytes"),r},g=function(e){var t,n,r=e.byteLength,o=new DataView(e);for(t=0;r>t;t+=1)n=""+t+": ",n+=o.getUint8(t),console.log(n)},m=function(t){if(!e.isString(t))throw new Error("T.stream: "+t+" is not a string!");switch(t=t.toLowerCase()){case"uint8":case"uint16":case"uint32":return t;default:throw new Error("T.stream: Invalid data type ("+t+")")}},v=function(t,n){var r,o,i,a,u;switch(n){case"uint8":case"uint16":case"uint32":o=!0,i=!0;break;default:o=!1,i=!1}switch(n){case"uint8":r=255;break;case"uint16":r=65535;break;case"uint32":r=4294967295}return"bool"==typeof t&&(t=t?1:0),i&&(t=Math.floor(t)),a=e.sign(t),u=Math.abs(t),u>r&&(t=r*a),o&&0>t&&(t=r-(t+1)),t},w=function(e,t){var n,r,o=s();n=m(t),r=v(e,n),o.push({value:r,type:n})},p=function(e,t,n,r){var a,u,s;if(t=t||o,!(t instanceof ArrayBuffer))throw new Error("T.stream: Nonexistent array buffer");return u=new DataView(t),e=m(e),a=n?n:i,s=f(u,e,a,r),n||(i+=c(e)),s};_loadArrayBuffer=function(e){return o=e,i=0,e},e.isLittleEndian=function(){return r},e.streamCreate=function(){return a=[],u=a},e.streamOpen=function(e){return _loadArrayBuffer(e)},e.streamWrite=function(e,t){w(e,t)},e.streamRead=function(e,t){return p(e,void 0,void 0,t)},e.streamGetArrayBuffer=function(e){return e=e||u,h()},e.logArrayBuffer=function(e){g(e)}},Tengu.modules.xhr_old=function(e){var t=function(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(null),200===t.status},n=function(e){var t,n,r,o=new XMLHttpRequest;return o.open("HEAD",e,!1),o.send(null),200===o.status?(t=o.getResponseHeader("Last-Modified"),n=new Date(t),r=n.getTime()):r=void 0,r},r=function(e,t,n){n=n||function(e){console.warn(e)};var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t&&t(r.responseText):n&&(console.log("xhr",r),n(r)))},r.open("GET",e,!0),r.send()},o=function(e,t,n){var o=function(e){t(JSON.parse(e))};r(e,o,n)};e.xhrFileExists=function(e){return t(e)},e.xhrGetDateModified=function(e){return n(e)},e.xhrGetJSON=function(e,t,n){return o(e,t,n)}},Tengu.modules.xhr=function(e){if("undefined"==typeof window)return!1;var t=function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw t}}if(e)return e;throw new Error("Cannot create XHR instance")},n=function(t,n){switch(t.status){case 200:e.isFunction(n.success)&&n.success(),e.isFunction(n.done)&&n.done();break;default:e.isFunction(n.fail)&&n.fail()}e.isFunction(n.always)&&n.always()},r=function(e,t){var n;for(n in t)"string"==typeof n&&"string"==typeof t[n]&&(console.log("set header",n,t[n]),e.setRequestHeader(n,t[n]))},o=function(o,i,a,u,s,c){var l=t(),f={success:null,done:null,fail:null,always:null},d={success:function(e){return f.success=e,d},done:function(e){return f.done=e,d},fail:function(e){return f.fail=e,d},always:function(e){return f.always=e,d}};return e.isFunction(u)&&(f.success=u),l.open(o,i,!0),"string"==typeof s&&l.setRequestHeader("Content-Type",s),e.isObject(c)&&r(l,c),n(l,f),l.send(),d};e.get=function(e,t,n,r,i){return o("GET",e,t,n,r,i)},e.post=function(e,t,n,r,i){return o("POST",e,t,n,r,i)},e.getDateModified=function(e){var t,n=new XMLHttpRequest;return n.open("HEAD",e,!1),n.send(null),t=n.getResponseHeader("Last-Modified")}},Tengu.modules.websocket=function(e){e.initSocket=function(e,t,n,r){var o=new WebSocket(e);return o.onopen=function(){o.send(t)},o.onmessage=function(e){n(e.data)},o.onerror=function(e){r(e)},{error:o.onerror}}},Tengu.modules.appcache=function(e){if("undefined"==typeof window)return!1;if(!window.applicationCache)return!1;var t=!1,n=[];window.applicationCache.onerror=function(){var e,r;for(t=!0,r=n.length,e=0;r>e;e+=1)n[e]();return!1},e.appCache_getStatus=function(){var e=window.applicationCache;switch(e.status){case e.UNCACHED:return"UNCACHED";case e.IDLE:return"IDLE";case e.CHECKING:return"CHECKING";case e.DOWNLOADING:return"DOWNLOADING";case e.UPDATEREADY:return"UPDATEREADY";case e.OBSOLETE:return"OBSOLETE";default:return"UKNOWN CACHE STATUS"}},e.appCacheOffline=function(){return t},e.appCache_onOffline=function(e){t?e():n.push(e)}},Tengu.modules.fileio=function(e){e.writeJSON=function(t,n,r,o){var i=JSON.stringify(r),a=e.getWorkingDir()+n;$.ajax({url:t,data:{filename:a,str:i},type:"POST",success:function(){o()},dataType:"text/json"})},e.readJSON=function(e,t){$.ajax({url:e,cache:!1,success:function(e){t(e)},dataType:"text/json"})},e.readTXT=function(e,t){$.ajax({url:e,cache:!1,success:function(e){t(e)},dataType:"text"})}},Tengu.modules.webstorage=function(e){if("undefined"==typeof navigator)return!1;var t,r=function(){return"undefined"!=typeof Storage},o=function(){if(!r)throw new Error("Web Storage Unavailable")},i=function(e){if(!(e instanceof ArrayBuffer))throw new Error("T.webstorage: Invalid ArrayBuffer",e);return String.fromCharCode.apply(null,new Uint16Array(e))},a=function(e){var t,n,r=new ArrayBuffer(2*e.length),o=new Uint16Array(r);for(n=e.length,t=0;n>t;t+=1)o[t]=e.charCodeAt(t);return r},u=function(e){var t=["string","bool","int","float","json","bin"];return t.indexOf(e)>=0},s=function(e,t){switch(void 0==t&&(t="string"),t){case"string":case"bool":case"int":case"float":return""+e;case"json":return JSON.stringify(e);case"bin":return i(e)}},c=function(e,t){switch(void 0==t&&(t="string"),e){case void 0:return void 0;case"undefined":return void 0;case"null":return null;case"":return void 0}switch(t){case"string":return e;case"bool":return!("0"==e||"false"==e||"null"==e||"undefined"==e||"NaN"==e);case"int":return parseInt(e);case"float":return parseFloat(e);case"json":return JSON.parse(e);case"bin":return a(e)}},l="";!function(){t=void 0!=navigator.webkitPersistentStorage}();var f=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},d=function(e){var t=localStorage[l+"."+e];return"string"==typeof t?t.split("¬"):[]},h=function(t,n){if(!e.isArray(n))throw new Error("_db_array_set: Invalid array - "+n);localStorage[l+"."+t]=n.join("¬")},g=function(e,t){if("string"!=typeof t)throw new Error("_db_array_append data must be string.");var n=d(e);n.push(t),h(e,n)},m=function(e,t){var n=d(e);n.splice(n.indexOf(t),1),console.log("arrayRemove",t,n),h(e,n)},v=function(){return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()},w=function(e){var t,n=[l+"."+e+".schema_columnName",l+"."+e+".schema_columnType",l+"."+e+".guidList"];for(t in n)if(!localStorage[n[t]])return!1;return!0},p=function(e,t){var n,r=[],o=[];for(n in t){if("string"!=typeof n)throw new Error("Invalid Name: "+n);if(!u(t[n]))throw new Error("Invalid Type: "+t[n]);r.push(n),o.push(t[n])}h(e+".schema_columnName",r),h(e+".schema_columnType",o),h(e+".guidList",[])},y=function(e,t,n){var r=d(e+".schema_columnName"),o=d(e+".schema_columnType");if("string"!=typeof t)throw new Error("Invalid Name: "+t);if(!_validateType(n))throw new Error("Invalid Type: "+n);r.push(t),o.push(n),h(name+".schema_columnName",r),h(name+".schema_columnType",o)},b=function(e,t,n){var r,o,i,a=d(e+".schema_columnName"),u=d(e+".schema_columnType"),c=[];r=void 0!=n?""+n:v();for(o in a)i=t[a[o]],void 0==i?(console.warn("Column '"+a[o]+"' is missing from record."),c[o]=""):c[o]=s(i,u[o]);return h(e+"."+r,c),g(e+".guidList",r),r},x=function(e,t,n,r){var o,i=d(n+"."+r),a={};if(0==i.length)return void 0;for(o in e)a[e[o]]=c(i[o],t[o]);return a._id=r,a},T=function(e,t){var n=d(e+".schema_columnName"),r=d(e+".schema_columnType");return x(n,r,e,t)},k=function(t,n){var r,o=d(t+".schema_columnName"),i=d(t+".schema_columnType"),a=[];if(!e.isArray(n))throw new Error("_db_readMultiple Invalid array: "+n);for(r in n)a.push(x(o,i,t,n[r]));return a},S=function(e,t,r){var o,i=d(e+".schema_columnName"),a=d(e+".schema_columnType"),u=d(e+"."+t);for(o in i)n=r[i[o]],void 0==n?console.warn("Column '"+i[o]+"' is missing from record."):u[o]=s(n,a[o]);h(e+"."+t,u)},_=function(e,t){console.log("db delete "+t),m(e+".guidList",""+t),localStorage.removeItem(l+"."+e+"."+t)},E=function(t,n){if(!e.isArray(n))throw new Error("_db_deleteMultiple Invalid array: "+n);var r,o;for(r in n)o=""+n[r],m(t+".guidList",o),localStorage.removeItem(l+"."+t+"."+o)},M=function(e,t,n){var r,o,i=d(e+".guidList"),a=[];for(r in i)o=parseInt(i[r]),t>o||o>=n||a.push(""+o);return k(e,a)},C=function(t,n){var r,o=d(t+".guidList");for(r in o)o[r]=parseInt(o[r]);return o=e.sort(o),n>o.length&&(n=o.length),o.splice(0,n)};e.db_tableExists=function(e){return o(),w(e)},e.db_newTable=function(e,t){return o(),p(e,t)},e.db_addColumn=function(e,t,n){return o(),y(e,t,n)},e.db_create=function(e,t,n){return o(),b(e,t,n)},e.db_read=function(e,t){return o(),T(e,t)},e.db_readMultiple=function(e,t){return o(),k(e,t)},e.db_update=function(e,t,n){return o(),S(e,t,n)},e.db_delete=function(e,t){return o(),_(e,t)},e.db_deleteMultiple=function(e,t){return o(),E(e,t)},e.db_queryGuidRange=function(e,t,n){return o(),M(e,t,n)},e.db_queryGuidGetLowest=function(e,t){return o(),C(e,t)},e.webStorageAvailable=function(){return r()},e.setGlobalKey=function(e){l=e},e.getGlobalKey=function(){return l},e.requestQuota=function(){var e=function(e){console.log("File System Error: ",e)},n=function(e){console.log("File System Request Successful!   Name: "+e.name+", Root: "+e.root)};return function(r,o,i){o=o||n,i=i||e,t?navigator.webkitPersistentStorage.requestQuota(r,function(e){window.webkitRequestFileSystem(PERSISTENT,e,o,i)},i):console.log("No webkitPersistentStorage")}}(),e.queryUsageAndQuota=function(e,n){e=e||function(e,t){console.log("Used quota: "+e+", remaining quota: "+t)},n=n||function(e){console.log("Query Usage Error",e)},t?navigator.webkitPersistentStorage.queryUsageAndQuota(function(t,n){e(t,n)},n):console.log("No webkitPersistentStorage")},e.localSet=function(e,t,n){var r;o(),r=s(t,n),localStorage[l+"."+e]=r},e.localGet=function(e,t){var n;return o(),n=localStorage[l+"."+e],c(n,t)},e.localDelete=function(e){return o(),localStorage.removeItem(l+"."+e)},e.localArrayClear=function(e){o(),localStorage[l+"."+e]=void 0},e.localArraySet=function(e,t,n){var r,i,a=[];for(o(),i=t.length,r=0;i>r;r+=1)a[r]=s(t[r],n);localStorage[l+"."+e]=a.join("¬")},e.localArrayRemoveValue=function(t,n,r){var o=e.localArrayGet(t,r);o=o||[];var i=e.arrayRemoveValue(o,n);e.localArraySet(t,i,r)},e.localArrayAppend=function(t,n,r){var o=e.localArrayGet(t,r);o=o||[],o.push(n),e.localArraySet(t,o,r)},e.localAppendIfNotInArray=function(t,n,r){var o=e.localArrayGet(t,r);return o=o||[],o.indexOf(n)>=0?!1:(o.push(n),e.localArraySet(t,o,r),!0)},e.localArrayReplaceLast=function(t,n,r){var o,i=e.localArrayGet(t,r);i=i||[],o=i.length-1,0>o&&(o=0),i[o]=n,e.localArraySet(t,i,r)},e.localArrayGet=function(e,t){var n,r,i,a,u=[];if(o(),n=localStorage[l+"."+e],void 0==n||"undefined"==n)return void 0;for(r=n.split("¬"),a=r.length,i=0;a>i;i+=1)u[i]=c(r[i],t);return u},e.localClearAllData=function(){if(!l)throw new Error("No Global Key Set!!!!");var e,t,n,r,o=[];for(n=l.length,t=localStorage.length,e=0;t>e;e+=1)r=localStorage.key(e),r.slice(0,n)==l&&o.push(r);for(e in o)localStorage.removeItem(o[e])},e.localStorageLog=function(t){void 0==t&&(t=!1);var n,r,o,i="\r\n",a="";for(r=localStorage.length,a+="//Begin localStorage//////////////////////////////////////////////////////////////////////////"+i,n=0;r>n;n+=1)o=localStorage.key(n),a+=o,t&&(a+=": "+localStorage[o]),a+=i;a+="//End localStorage////////////////////////////////////////////////////////////////////////////"+i,e.getDLURLfromString(a,"localStorageLog.txt")}},Tengu.modules.tween=function(e){e.getSine=function(t,n){var r,o=e.now();return n&&(o+=n%t),r=o%t,r/=t,r*=2*Math.PI,(Math.sin(r)+1)/2},e.middleSquare=function(e){for(var t,n,r=e,o=64,i=o/2,a=o/4,u=Math.pow(2,o);u>r;)r*=e;return u=Math.pow(2,i+a),t=Math.pow(2,a),n=Math.pow(2,i),r%=u,r=Math.floor(r/t),r/=n},e.getSmoothNoise=function(t){var n=Math.floor(e.now()/t),r=n+1,o=e.now()%t/t,i=e.middleSquare(n),a=e.middleSquare(r);return i*(1-o)+a*o
},e.getIntervalRot=function(t,n){var r=e.now()%t/t;return n||(r=1-r),r*Math.PI*4},e.getIntervalDiscrete=function(t,n){var r=e.now()%t/t;return Math.floor(r*n)},e.arcFadeIn=function(e){var t=1-e;return 1-Math.sqrt(1-t*t)},e.arcFadeOut=function(e){return Math.sqrt(1-e*e)},e.Tween=function(){this.time=[],this.nCallback=[],this.time.push(0),this.startTime=e.now(),this.data={},this.callback=null,this.state=0},e.Tween.prototype.addInterval=function(e,t){var n=this.time.length-1;this.time.push(this.time[n]+e),t&&(this.nCallback[n+1]=t)},e.Tween.prototype.setStartTime=function(t){this.startTime=e.now()+t},e.Tween.prototype.restart=function(){this.startTime=e.now(),this.update()},e.Tween.prototype.setCallback=function(e){this.callback=e},e.Tween.prototype.update=function(){var t,n,r,o,i=e.now(),a=0;for(t=0;t<this.time.length;t+=1)i>=this.time[t]+this.startTime&&(a=t);this.state!=a&&(this.callback&&this.callback({n:a}),this.nCallback[a]&&this.nCallback[a](),this.state=a),n=-1,a<this.time.length-1&&(r=this.time[a+1]-this.time[a],o=i-(this.time[a]+this.startTime),n=o/r),this.data={n:a,t:n}},e.Tween.prototype.getIndex=function(){return this.data.n},e.Tween.prototype.getTween=function(e){if(void 0==e)return this.data.t;var t=this.data.n;return e>t?0:t==e?this.data.t:t>e?1:void 0}},Tengu.modules.geoloc=function(e){var t,n,r,o,i,a,u=function(t){console.log("Geoloc Success: ",t),a=e.date()-i,t.date=i,t.response_time=a,o=t,void 0!=r&&r(t)},s=function(e){console.warn("Geoloc Error: ("+e.code+"): "+e.message)},c=function(o,a,c){return console.log("Geoloc Called"),r=a,c=c||s,i=e.date(),navigator.geolocation?t=navigator.geolocation[o](u,c,n):(console.warn("ERROR: navigator.geolocation is unavailable"),!1)};e.getLastCoords=function(){if(o){var e=o,t=[e.coords.latitude,e.coords.longitude];return t}return void 0},e.getLastGeoloc=function(){return e.clone(o)},e.setGeolocOptions=function(e,t,r){n={enableHighAccuracy:e||!1,timeout:t||1/0,maximumAge:r||0}},e.pingGeoloc=function(t,n){return e.getGeoloc(t,n)},e.getGeoloc=function(e,t){return c("getCurrentPosition",e,t)},e.watchGeoloc=function(e,t){return id=c("watchPosition",e,t),id},e.clearWatchGeoloc=function(e){e=e||t,navigator.geolocation?navigator.geolocation.clearWatch(e):console.warn("ERROR: navigator.geolocation is unavailable")}},Tengu.modules.date=function(e){if("undefined"!=typeof window){var t,n=(window.performance||{},function(){this.callstack=[],this.index=0,this.looping=!1}),r=function(e){return(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()},o=function(e,t,n,r,o,i,a,u,s){var c,l=new Date(e);if(void 0!=n&&l.setMonth(n),void 0!=r&&l.setDate(r),void 0!=o){for(c=o-l.getDay(),console.log("dd",c,o,l.getDay());-6>c;)c+=7;for(;c>0;)c-=7;l.setTime(l.getTime()+864e5*c)}return void 0!=i&&l.setHours(i),void 0!=a&&l.setMinutes(a),void 0!=u&&l.setSeconds(u),void 0!=s&&l.setMilliseconds(s),l.getTime()};!function(e){var t,n=["now","webkitNow","msNow","mozNow"];if(e.performance)for(var r=0;r<n.length;++r){var o=n[r];if(e.performance[o]){t=function(){return e.performance[o]()};break}}t||(t=Date.now),e.perfNow=t}(window),e.now=function(){return window.perfNow()},n.prototype._loop=function(){var t,n;for(n in this.callstack)t=this.callstack[n],t.t<=e.now()&&(t.c(),this.callstack.splice(n,1));this.looping=!1,this.callstack.length>0&&(this.looping=!0,setTimeout(e.createCallback(this,this._loop,null),0))},n.prototype.set=function(t,n){var r=e.now()+n;return this.callstack[this.index]={n:this.index,c:t,t:r},this.index+=1,this.looping||this._loop(),this.index-1},n.prototype.clear=function(e){var t;for(t in this.callstack)this.callstack[t].n==e&&this.callstack.splice(t,1)},t=new n}e.MS_PER_YEAR=3156e7,e.MS_PER_MONTH=263e7,e.MS_PER_DAY=864e5,e.MS_PER_HOUR=36e5,e.MS_PER_MINUTE=6e4,e.MS_PER_SECOND=1e3,e.date=function(){return(new Date).getTime()},e.parseDate=function(e){var t=new Date(e);return t.getTime()},e.getYear=function(e){var t=new Date(e);return t.getFullYear()},e.getHourSpan=function(e,t){return(t-e)/36e5},e.getAMPM=function(e){var t=new Date(e);return t.getHours()>=12?"PM":"AM"},e.dhmsToMs=function(e){var t,n=0,r={d:864e5,h:36e5,m:6e4,s:1e3};for(t in e)r[t]&&(n+=r[t]*e[t]);return n},e.dhmsStringSingle=function(e){var t=864e5,n=36e5,r=6e4,o=1e3;return e>t?""+Math.round(e/t)+"d":e>n?""+Math.round(e/n)+"h":e>r?""+Math.round(e/r)+"m":""+Math.round(e/o)+"s"},e.dhmsString=function(e){var t="",n=3156e7,r=263e7,o=864e5,i=36e5,a=6e4,u=1e3;return 0>e&&(t+="-"),e=Math.abs(e),e>n&&(t+=Math.floor(e/n)+"Y",e%=n),e>r&&(t+=Math.floor(e/r)+"M",e%=r),e>o&&(t+=Math.floor(e/o)+"d",e%=o),e>i&&(t+=Math.floor(e/i)+"h",e%=i),e>a&&(t+=Math.floor(e/a)+"m",e%=a),t+=Math.floor(e/u)+"s"},e.hmsString=function(t){var n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4),o=Math.floor(t%6e4/1e3),i="";return i+=e.numToString_minDigits(n,2)+":",i+=e.numToString_minDigits(r,2)+":",i+=e.numToString_minDigits(o,2)},e.msToHourMinString=function(e){var t="",n=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4);return n&&(t+=n+"h",r&&(t+=" ")),r&&(t+=r+"m"),t},e.getLast_midnight=function(e){return o(e,void 0,void 0,void 0,void 0,0,0,0,0)},e.getLast_sunday=function(t){var n=o(t,void 0,void 0,void 0,0,0,0,0,0);return e.getLast_midnight(n)},e.getLast_firstOfMonth=function(e){var t=o(e,void 0,void 0,1,void 0,0,0,0,0);return t},e.getLast_firstOfYear=function(e){var t=o(e,void 0,0,1,void 0,0,0,0,0);return t},e.getNext_firstOfYear=function(t){var n=e.getLast_firstOfYear(t),r=new Date(n);return r.setFullYear(r.getFullYear()+1),r.getTime()},e.getNext_firstOfMonth=function(t){var n=e.getLast_firstOfMonth(t),r=new Date(n),o=r.getMonth()+1;return o>=12&&(o-=12),r.setMonth(o),r.getTime()},e.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()};var i=function(e){var t=new Date(e);return t.getMonth()};e.getMonthName_short=function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t[i(e)]},e.getMonthName=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t[i(e)]},e.addHours=function(e,t){return e+36e5*t},e.addDays=function(e,t){return e+864e5*t},e.addWeeks=function(e,t){return e+6048e5*t},e.addMonths=function(e,t){var n=new Date(e),r=n.getMonth(),o=0;for(r+=t;r>=12;)r-=12,o+=1;for(;0>r;)r+=12,o-=1;return n.setFullYear(n.getFullYear()+o),n.setMonth(r),n.getTime()},e.addYears=function(e,t){var n=new Date(e);return n.setFullYear(n.getFullYear()+t),n.getTime()},e.dateToTimeStamp=function(e){var t,n=new Date(e);return n.f=function(){var e=this.getFullYear()+"-";return e+=(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"-",e+=(this.getDate()<10?"0":"")+this.getDate()+"_",e+=r(this)},t=n.f(),delete n,t},e.dateToTimeString=function(e,t){var n,r=new Date(e);return r.f=function(){var e=t;if("date_only"==e)return this.toLocaleDateString();var n=this.toLocaleTimeString(),r=n.substr(0,n.length-6),o=n.substr(n.length-3,3);return"time_only"==e?r+o:(n=r+o+"  ",n+=this.toLocaleDateString())},n=r.f(),delete r,n},e.dateToHourString=function(t){return e.dateToTimeString(t,"time_only")},e.dateToDateString=function(t){return e.dateToTimeString(t,"date_only")},e.setTimeout=function(e,n){return t.set(e,n)},e.clearTimeout=function(e){t.clear(e)}},Tengu.modules.draw=function(e){if("undefined"==typeof window)return!1;var t=.4330127018922193;e.drawCircle=function(e,t,n,r){e.beginPath(),e.arc(t,n,r,0,2*Math.PI,!1)},e.drawLine=function(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(r,o),e.stroke()},e.drawTriangle=function(e,t,n,r,o,i){o=o||1,void 0==i&&(i=!1);var a,u=[];for(a=0;3>a;a+=1)u[a]={x:r[a].x*o,y:r[a].y*o};e.beginPath(),e.moveTo(t+u[0].x,n+u[0].y),e.lineTo(t+u[1].x,n+u[1].y),e.lineTo(t+u[2].x,n+u[2].y),e.closePath()},e.drawTriRect=function(e,t,n,r,o,i){var a,u=r/2+t,s=o/2+n,c=r+t,l=o+n;switch(i){case"left":a=[{x:t,y:s},{x:c,y:n},{x:c,y:l}];break;case"right":a=[{x:c,y:s},{x:t,y:n},{x:t,y:l}];break;case"down":a=[{x:u,y:l},{x:t,y:n},{x:c,y:n}];break;case"up":default:a=[{x:u,y:n},{x:t,y:l},{x:c,y:l}]}e.beginPath(),e.moveTo(a[0].x,a[0].y),e.lineTo(a[1].x,a[1].y),e.lineTo(a[2].x,a[2].y),e.closePath()},e.drawEqTri=function(n,r,o,i,a){var u,s,c=[{x:0,y:-.5},{x:-t,y:.25},{x:t,y:.25}];switch(a){case"right":for(u=0;3>u;u+=1)s=-1*c[u].y,c[u].y=c[u].x,c[u].x=s;break;case"left":for(u=0;3>u;u+=1)s=c[u].y,c[u].y=c[u].x,c[u].x=s;break;case"down":for(u=0;3>u;u+=1)c[u].y*=-1;break;case"up":}e.drawTriangle(n,r,o,c,i)},e.drawPath=function(t,n,r,o,i){var a,u,s,c,l;for(l={x:n,y:r},a=i.split(/[\s,]/i),c=null,u=0,s=a.length;s>u;u++)switch(a[u].toLowerCase()){case"m":case"l":case"c":case"z":case"h":case"v":case"a":c=a[u],"z"==c.toLowerCase()&&t.closePath();break;default:switch(c.toLowerCase()){case"m":e.isUpperCase(c)?(l.x=n+a[u]*o,l.y=r+a[u+1]*o):(l.x+=a[u]*o,l.y+=a[u+1]*o),t.moveTo(l.x,l.y),u+=1,c="l";break;case"l":e.isUpperCase(c)?(l.x=n+a[u]*o,l.y=r+a[u+1]*o):(l.x+=a[u]*o,l.y+=a[u+1]*o),t.lineTo(l.x,l.y),u+=1;break;case"h":e.isUpperCase(c)?l.x=n+a[u]*o:l.x+=a[u]*o,t.lineTo(l.x,l.y);break;case"v":e.isUpperCase(c)?l.y=r+a[u]*o:l.y+=a[u]*o,t.lineTo(l.x,l.y);break;case"c":if(e.isUpperCase(c)){var f={x:n+a[u]*o,y:r+a[u+1]*o},d={x:n+a[u+2]*o,y:r+a[u+3]*o};l.x=n+a[u+4]*o,l.y=r+a[u+5]*o}else{var f={x:l.x+a[u]*o,y:l.y+a[u+1]*o},d={x:l.x+a[u+2]*o,y:l.y+a[u+3]*o};l.x+=a[u+4]*o,l.y+=a[u+5]*o}t.bezierCurveTo(f.x,f.y,d.x,d.y,l.x,l.y),u+=5;break;case"a":var h=a[u]*o,g=a[u+1]*o,m=(a[u+2],a[u+3],a[u+4],a[u+5]*o),v=a[u+6]*o;e.isUpperCase(c)?(h+=n,g+=r,m+=n,v+=r):(h+=l.x,g+=l.y,m+=l.x,v+=l.y),u+=6;break;case"Z":case"z":t.closePath();break;default:window.console&&window.console.log(a[u])}}}},Tengu.modules.graph=function(e){e.now;e.method=function(){}},Tengu.modules.image=function(e){var t,n={},r=!1,o=function(t){var n;return n="string"==typeof t?e.newImgFrame(t):t},i=function(e){n[e].loaded=!0,a()},a=function(){var e,r=!0;for(e in n)n[e].loaded||(r=!1);return void 0!==t&&r&&t(),r},u=function(e){var t,r,o=e,i=n[e.filename];return void 0==i?(console.error("imgFrameZeroWidthCheck - img not found:",e.filename),!1):(t=i.img,(r=i.loaded)?((o.sw<=0||o.sh<=0)&&(o.sw=t.width,o.sh=t.height,o.ox=o.sw/2,o.oy=o.sh/2),!0):!1)},s=function(e,t,r,o,i,a,u,s){var c=t,l=n[c.filename].img,f=n[c.filename].loaded;return f?(void 0===r&&(r=c.sx),void 0===o&&(o=c.sy),void 0===i&&(i=1),void 0===a&&(a=1),void 0===u&&(u=0),void 0===s&&(s=1),e.save(),e.globalAlpha*=s,e.translate(r,o),e.rotate(u),e.scale(i,a),e.translate(-c.ox,-c.oy),e.drawImage(l,c.sx,c.sy,c.sw,c.sh,0,0,c.sw,c.sh),e.restore(),!0):!1};e.imgGetWidth=function(e){var t=o(e);return t.sw},e.imgGetHeight=function(e){var t=o(e);return t.sh},e.getImage=function(e){return n[e]},e.isLoaded=function(e){return 1==n[e].loaded},e.setImgLoadCallback=function(e){return t=e,e},e.loadImage=function(e,t){var o;return void 0!==n[e]?e:(r=!1,o=new Image,o.onload=function(){i(e),void 0!==t&&t(e)},n[e]={},n[e].img=o,n[e].loaded=!1,o.src=e,e)},e.loadCanvasAsImage=function(e,t,o){var a;return void 0!==n[t]?t:(r=!1,a=new Image,a.onload=function(){i(t),void 0!==o&&o(t)},n[t]={},n[t].img=a,n[t].loaded=!1,a.src=e.toDataURL("image/png"),t)},e.newImgFrame=function(t,n,r,o,i){var a={filename:t,sx:n||0,sy:r||0,sw:o||0,sh:i||0,ox:o/2,oy:o/2,update:function(){u(this)},setOrigin:function(e,t){ox=e,oy=t},isLoaded:function(){return e.isLoaded(this.filename)},getBbox:function(){return{x:-this.ox,y:-this.oy,w:this.sw,h:this.sh}}};return a.update(),a},e.drawImage=function(t,n,r,i,a,u,s,c){var l=o(n);return a=a||l.sw,u=u||l.sh,e.drawImgFrame(t,l,r,i,a/l.sw,u/l.sh,s,c)},e.drawImgFrame=function(e,t,n,r,i,a,c,l){var f=o(t);return u(f)?s(e,f,n,r,i,a,c,l):!1}},Tengu.modules.imagedata=function(e){e.createImageData=function(e,t,n){return e.createImageData(t,n)},e.getImageDataBitArray=function(e){return e.data},e.getImageDataResolution=function(e){return e.resolution}},Tengu.modules.fullscreen=function(e){var t=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},n=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},r=function(){return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitIsFullScreen?!0:!1};e.setFullScreen=function(){t(document.documentElement)},e.exitFullScreen=function(){n()},e.isFullScreen=function(){return r()},e.toggleFullScreen=function(){r()?e.exitFullScreen():e.setFullScreen()}},Tengu.modules.fps=function(e){var t=null,n=.9,r=null,o=-1,i=null;e.fpsCycle=function(){var a=e.now();return i?(o=r,r=(a-i)*(1-n)+o*n,i=a,o>=0?t=1e3/r:null):(i=a,null)},e.fpsGet=function(){return t}},Tengu.modules.canvas=function(e){if("undefined"==typeof window)return!1;var t=!1,n=function(){var e='<a id="dlLink"></a>';if(e+='<p id="textDiv"></p>',e+='<div id="stretch" overflow="hidden">',e+='<div id="garbage"></div>',e+='<canvas id="mainCanvas" width="0" height="0" overflow="hidden" position="fixed"></canvas>',e+='<div id="canvasOverlay" overflow="hidden" position="fixed"></div>',e+='<div id="fadeOverlay" position="fixed"></div>',e+="</div>",e+='<span id="debug"></span>',document.ontouchmove=function(e){e.preventDefault()},!document.body)throw new Error("document.body doesn't exist!");document.body.innerHTML+=e,document.body.style||(console.warn("document.body.style not initialized, initializing now"),document.body.style={}),document.body.style.overflow="hidden"},r=function(){return document.getElementById("canvasOverlay")?!0:!1},o=function(){return document.getElementById("canvasOverlay")},i=function(){return document.body.getElementsByTagName("canvas")[0]},a=function(e,t,n,r){var a,u;a=i(),u=o(),a.width=n,a.height=r,u.style.width=n,u.style.height=r},u={update:function(){document.body.style.zoom=1,document.body.style.MozTransform="scale(1)",document.body.style.WebkitTransform="scale(1)";var e;t=!0,this.canvas=i(),this.overlay=o(),this.ctx=this.canvas.getContext("2d"),e=this.canvas,l&&a(0,0,window.innerWidth,window.innerHeight),this.w=e.width,this.h=e.height,this.cx=e.width/2,this.cy=e.height/2,this.vertical=e.height>e.width,this.scalar=e.height/960}},s=function(){r()||n(),u.update()},c=function(){var t=e.clone(u);return t.canvas=u.canvas,t.ctx=u.ctx,t},l=!1;e.initTenguCanvas=function(){s()},e.canvasFillScreen=function(e){return void 0===e&&(e=!0),l=e},e.canvasSetAntiAlias=function(e){u.ctx.webkitImageSmoothingEnabled=e},e.setCanvasRect=function(e,t,n,r){void 0==n&&void 0==r&&(n=e,r=t,e=0,t=0),a(e,t,n,r)},e.updateCanvasData=function(){return t||console.warn("Can't get canvas, document isn't ready yet!"),u.update(),c()},e.getCanvasData=function(){return t||console.warn("Can't get canvas, document isn't ready yet!"),c()},e.getCtx=function(){return e.getCanvasData.ctx}},Tengu.modules.canvasmanip=function(e){var t=function(e){return e instanceof HTMLImageElement},n=function(e){var t=e.getContext("2d");return t.clearRect(0,0,e.width,e.height),e},r=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.ctx=n.getContext("2d"),n.clear=function(){n.ctx.save(),n.ctx.setTransform(1,0,0,1,0,0),n.ctx.clearRect(0,0,n.width,n.height),n.ctx.restore()},n},o=function(e){var t=r(e.width,e.height),n=t.getContext("2d");return n.drawImage(e,0,0),t},i=function(e,t){var n,o,i,a=[],u=e.width,s=e.height;for(n in t){if(o=t[n],"number"!=typeof o.w)throw new Error("Invalid w: "+w+" at index: "+n);if("number"!=typeof o.h)throw new Error("Invalid h: "+h+" at index: "+n);i=r(o.w,o.h),i.ctx.drawImage(e,0,0,u,s,0,0,o.w,o.h),a[n]=i}return a},a=function(t){var r=t,o=e.newElement("canvas"),i=t.width,a=t.height;return o.width=i,o.height=a,o.clear=function(){n(r)},o.drawFunction=function(e,t){var n=0,i=0;switch(o.halign){case"center":n=t.width/2;break;case"right":n=t.width}switch(o.valign){case"middle":i=t.height/2;break;case"bottom":i=t.height}e.ctx.drawImage(r,0,0,r.width,r.height,t.x-n,t.y-i,t.width,t.height)},o.getCanvas=function(){return r},o.setCanvas=function(e){o.width=e.width,o.height=e.height,r=e},o};e.newCanvasElement=function(e){return a(e)},e.newCanvas=function(n,i){if("string"==typeof n&&(n=e.getImage(n),!n))throw new Error(n+" image not found.");return t(n)?o(n):r(n,i)},e.drawCanvas=function(e,t,n,r,o,i,a,u,s,c){e.drawImage(t,n,r,o,i,a,u,s,c)},e.mipmapCanvas=function(e,t){return i(e,t)}},Tengu.modules.canvasDraw=function(e){e.drawLine=function(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(r,o),e.stroke()},e.fillRect=function(e,t){e.fillRect(t.x,t.y,t.w,t.h)},e.strokeRect=function(e,t){e.strokeRect(t.x,t.y,t.w,t.h)}},Tengu.modules.pointer=function(){return"undefined"==typeof window?!1:void function(){function e(e){var t=o("down",e);if(!t)return!1;var n=t.mouse||t.touch&&1===e.touches.length;!u&&n&&(e.target.maybeClick=!0,e.target.maybeClickX=t.x,e.target.maybeClickY=t.y)}function t(e){e.target.maybeClick=!1,o("leave",e)}function n(e){o("move",e)}function r(e){var t=o("up",e);return t?(e.target.maybeClick&&Math.abs(e.target.maybeClickX-t.x)<5&&Math.abs(e.target.maybeClickY-t.y)<5&&(!u||Math.abs(c-window.pageXOffset)<5&&Math.abs(l-window.pageYOffset)<5)&&o("click",e),void(e.target.maybeClick=!1)):!1}function o(e,t){var n=t.target;if(i&&0===t.type.indexOf("mouse"))return!1;var r=document.createEvent("CustomEvent");return r.initCustomEvent("pointer"+e,!0,!0,{}),r.touch=0===t.type.indexOf("touch"),r.mouse=0===t.type.indexOf("mouse"),r.touch&&(i=!0),r.touch&&(r.x=t.changedTouches[0].pageX,r.y=t.changedTouches[0].pageY),r.mouse&&(r.x=t.clientX+window.pageXOffset,r.y=t.clientY+window.pageYOffset),r.maskedEvent=t,n.dispatchEvent(r),r}var i=!1,a=document,u=!1,s=!1,c=0,l=0;window.addEventListener("scroll",function(){u||(c=window.pageXOffset,l=window.pageYOffset),u=!0,clearTimeout(s),s=setTimeout(function(){u=!1,c=0,l=0},100)}),a.addEventListener("mousedown",e),a.addEventListener("touchstart",e),a.addEventListener("mouseup",r),a.addEventListener("touchend",r),a.addEventListener("mousemove",n),a.addEventListener("touchmove",n),a.addEventListener("mouseout",t),a.addEventListener("touchleave",t)}()},Tengu.modules.gui=function(e){if("undefined"==typeof window)return!1;var t,n,r,o,i,a,u=function(t,n){var r=function(t,n){return"number"==typeof t?t:e.isString(t)?-1==t.indexOf("%")?parseFloat(t):parseFloat(t)/100*n:void 0},o={};return o.x=r(t.x,n.width),o.width=r(t.width,n.width),o.y=r(t.y,n.height),o.height=r(t.height,n.height),o},s=function(){return document.getElementById("fadeOverlay")},c=function(e,t,n,r){var o=s(),i=[e,t,n,r];o.style.background="rgba("+i.join(",")+")",0>=r?(o.style.width=0,o.style.height=0):(o.style.width="100%",o.style.height="100%")},l=function(t){this.id=t,this.element=[],this.x=0,this.y=0,this.z=0,this.width="100%",this.height="100%",this.halign="center",this.valign="middle",this.visible=!0,this.disabled=!1,this._pressed=!1,this._over=!1,this.alpha=1,this.parent=null,this.scale=1,this.mirror=!1,this.flip=!1,this.imgFrame=null,this.preDrawFunction=function(){},this.drawFunction=function(){},this.postDrawFunction=function(){},this._drawbbox=!1,this.bbox={x:0,y:0,w:0,h:0},this._bbox={x:0,y:0,w:0,h:0},this.positioning="relative",this._create_timestamp=e.now()},f=function(e){var t=new l(e);return t.stopPropagation=function(){var e=this;return function(){m.call(e)}}(),t},d=function(t,n,r){var o,i,a,s=t,c=n.ctx;if(void 0===r){switch(o=f(),s.halign){case"left":o.x=0;break;case"right":o.x=n.w;break;case"center":o.x=n.cx}switch(s.valign){case"top":o.y=0;break;case"bottom":o.y=n.h;break;case"middle":o.y=n.cy}o.width=n.w,o.height=n.h,o.scale=n.scalar}else if(o=e.clone(r),!s.fit_to_parent){switch(s.halign){case"left":o.x=r.x;break;case"right":o.x=r.x+r.width;break;case"center":o.x=r.x+r.width/2}switch(s.valign){case"top":o.y=r.y;break;case"bottom":o.y=r.y+r.height;break;case"middle":o.y=r.y+r.height/2}}if(s.fit_to_parent||(a=u(s,o),"number"==typeof s.x&&(a.x*=o.scale),"number"==typeof s.y&&(a.y*=o.scale),"number"==typeof s.width&&(a.width*=o.scale),"number"==typeof s.height&&(a.height*=o.scale),o.x+=a.x,o.y+=a.y,o.width=a.width,o.height=a.height,o.scale*=s.scale,o.halign=s.halign,o.valign=s.valign),s._bbox={x:o.x+s.bbox.x*o.scale,y:o.y+s.bbox.y*o.scale,w:s.bbox.w*o.scale,h:s.bbox.h*o.scale},void 0!=s.updateFade&&s.updateFade(),o.alpha=s.alpha,"absolute"==s.positioning&&(o.x=s.x,o.y=s.y,o.width=s.width,o.height=s.height,o.scale=s.scale,s._bbox=e.clone(s.bbox),s._bbox.x+=o.x,s._bbox.y+=o.y),s.preDrawFunction.call(s,n,o),o._posToNum=a,s._draw_data=o,s.visible){c.save(),s._drawbox&&(c.save(),c.strokeStyle=void 0!=s._drawbox_color?s._drawbox_color:"red",c.strokeRect(o.x,o.y,o.width,o.height),c.restore()),c.globalAlpha*=o.alpha,s._clipToBbox&&(c.rect(s._bbox.x,s._bbox.y,s._bbox.w,s._bbox.h),c.clip()),s.drawFunction.call(s,n,o),s._drawbbox&&(c.save(),c.strokeStyle=void 0!=s._drawbbox_color?s._drawbox_color:"red",c.strokeRect(s._bbox.x,s._bbox.y,s._bbox.w,s._bbox.h),c.restore());for(i in s.element)d(s.element[i],n,o);s.postDrawFunction.call(s,n,o),c.restore()}return s},h=function(t,n,r){var o,i=!1;switch(void 0==n&&(n=500),r=r||function(){},t){case"white":case"slideLeft":case"slideRight":case"alpha":i=!0}if(i)return o=new e.Tween,o.addInterval(n,r),o.fade_type=t,o;throw new Error("Invalid fade type:  "+t)},g=void 0,m=function(){if(void 0==g)throw new Error("Don't call stopPropagation outside of an event handler!");g=!1},v=function(){var r,o=e.updateCanvasData(),i=n.element;for(r in i)d(i[r],o);t=window.setTimeout(function(){v.call(this)},b)},w=function(){var e=[{etype:"pointerdown",local:"onDown",global:"globalOnDown"},{etype:"pointerup",local:"onUp",global:"globalOnUp"},{etype:"pointermove",local:"onMove",global:"globalOnMove"}];return e}(),p=function(t){var n,r,o,i;r=w;for(o in r)if(t.event_type==r[o].etype){switch(this.globalOnClick=this.onClickAnywhere,void 0!=this[r[o].global]&&this[r[o].global](t),"globalOnDown"==r[o].global&&this.globalOnClick&&this.globalOnClick(t),i=!1,this[r[o].local]&&(i=!0),r[o].local){case"onDown":(this.onClick||this.onClickOff)&&(i=!0);break;case"onMove":(this.onEnter||this.onLeave)&&(i=!0)}if(!this.disabled&&i)if(e.pointRect(t.x,t.y,this._bbox)){switch(n=e.clone(t),n.x-=t.x,n.y-=t.y,r[o].local){case"onDown":this._pressed=!0,this.onClick&&this.onClick(t,n);break;case"onUp":this._pressed=!1;break;case"onMove":!this._over&&this.onEnter&&this.onEnter(t,n),this._over=!0}this[r[o].local]&&this[r[o].local](t,n)}else switch(r[o].local){case"onDown":this.onClickOff&&this.onClickOff(t,n);case"onMove":this._over&&this.onLeave&&this.onLeave(t,n),this._over&&this._pressed&&this.onUp&&this.onUp(t,n),this._over=!1,this._pressed=!1;break;case"onUp":this._pressed=!1}}},y=function(t){var o=e.now(),i=r||0,a=T;if(g=!0,r=o,a>o-i)return!1;var u,s=[],c=[],l=function(e){p.call(this,e),s.push(this),null!=this.parent&&-1==s.indexOf(this.parent)&&g&&l.call(this.parent,e)},f=function(e){if(void 0==e)return!1;if(e.disabled)return!1;var t,n,r=e.element;if(n=r.length,n>0)for(t=0;n>t;t+=1)f(r[t]);else c.push(e)},d=n.element;for(u in d)f(d[u]);for(u in c)l.call(c[u],t);g=void 0},b=1,T=10;l.prototype={getPressed:function(){return this._pressed},getOver:function(){return this._over},getCreateTime:function(){return this._create_timestamp},addChild:function(e){return this.element.push(e),e.parent=this,e},drawBbox:function(e){void 0==e&&(e=!0),"string"==typeof e&&(this._drawbbox_color=e,e=!0),this._drawbbox=e},drawBox:function(e){void 0==e&&(e=!0),"string"==typeof e&&(this._drawbox_color=e,e=!0),this._drawbox=e},removeChild:function(e){var t=this.element,n=t.indexOf(e);return e.parent=null,-1!=n?t.splice(n,1):-1},setAlign:function(){var e,t,n=Array.prototype.slice.call(arguments);for(t=n.length,e=0;t>e;e+=1)switch(n[e]){case"left":this.halign="left";break;case"right":this.halign="right";break;case"center":this.halign="center";break;case"top":this.valign="top";break;case"bottom":this.valign="bottom";break;case"middle":this.valign="middle"}return this},destroy:function(){var e;for(e in this.element)this.element[e].destroy();this.element=[]},setPositioning:function(e){switch(e){case"relative":case"absolute":this.positioning=e;break;default:throw new Error("Bad positioning value: "+e)}},setPosition:function(e,t){this.x=e,this.y=t},setWidthHeight:function(e,t){this.width=e,this.height=t},setRect:function(t){var n=e.argArray(arguments),r=n.length;if(1==r)this.width=t.w,this.height=t.h,this.x=t.x,this.y=t.y;else{if(4!=r)throw new Error("setRect requires either a rect{x,y,w,h}, or 4 arguments");this.width=n[2],this.height=n[3],this.x=n[0],this.y=n[1]}this.scale=1,this.bbox={x:0,y:0,w:this.width,h:this.height}},getRect:function(){return{x:this.x,y:this.y,w:this.width,h:this.height}},setBbox:function(e,t,n,r){this.bbox={x:e,y:t,w:n,h:r}},setImage:function(t){if(e.isString(t))this.imgFrame=e.newImgFrame(t);else{if(!e.isObject(t))return console.warn("T.element.setImage(img) - img is not an object or string.  img:",t),!1;this.imgFrame=t}if(this.imgFrame.update(),this.bbox=this.imgFrame.getBbox(),!this.bbox)throw new Error("Bad bbox from imgFrame");return this.width=this.bbox.w,this.height=this.bbox.h,this.imgFrame.isLoaded()},clipToBbox:function(e){void 0==e&&(e=!0),this._clipToBbox=e},logParent:function(){for(var e=this;null!=e;)console.log(e),e=e.parent},logDrawData:function(){for(var e=this;null!=e;)e._draw_data&&console.log(e._draw_data),e=e.parent}},n=f("document"),$(document).ready(function(){var e,t,n=["pointerdown","pointerup","pointermove"];for(t=n.length,e=0;t>e;e+=1)window.addEventListener(n[e],function(e){return function(t){t.event_type=e,y(t)}}(n[e]));"undefined"==typeof i&&(i=document.createElement("div"),i.style.display="none",document.body.appendChild(i)),o=function(e){i.appendChild(e),i.innerHTML=""}}),e.startDrawDocLoop=function(){t=window.setTimeout(function(){v.call(this)},b)},e.clearFadeOverlay=function(){c(255,255,255,0)},e.setFramerate=function(e){b=e},e.tempDrawElement=function(e,t,n){return d(e,t,n)},e.docAddChild=function(e){return n.addChild(e)},e.docRemoveChild=function(e){return n.removeChild(e)},e.newElement=function(e){return f(e)},e.newCanvasTextElement=function(){},e.newScreenElement=function(t){t=t||"screen";var n=f(t);return n.fit_to_parent=!0,n.halign="left",n.valign="top",n.fadeState=0,n._fade={state:0,value:0},n.updateFade=function(){var e,t,n=this._fade;switch(n.state){case 0:t=n.tweenIn;break;case 2:t=n.tweenOut}if(this.disabled=!1,void 0!=t){switch(this.disabled=!0,n.state){case 0:void 0!=a&&(t.fade_type=a);break;case 2:a=t.fade_type}switch(e=t.fade_type){case"white":case"slideRight":case"slideLeft":case"alpha":t.update(),x=t.getTween(0),n.state<2&&(x=1-x),n.value=x}}},n.setFadeIn=function(t,r,o){var i=this._fade,a=e.createCallback(n,function(){i.state=1,void 0!=o&&o()});i.tweenIn=h(t,r,a)},n.fadeOut=function(){var e=this._fade;e.state=2,e.tweenOut.restart(),this.disabled=!0},n.setFadeOut=function(t,r,o){var i=this._fade,a=e.createCallback(n,function(){i.state=3,void 0!=o&&o(),n.destroy()});i.tweenOut=h(t,r,a)},n.preDrawFunction=function(e,t){var n,r,o,i,a,u,s=(e.ctx,this._fade);switch(s.state){case 0:n=s.tweenIn;break;case 2:n=s.tweenOut}if(void 0!=n)switch(n.fade_type){case"alpha":switch(s.state){case 0:t.alpha=s.value;break;case 2:t.alpha=1-s.value}break;case"slideRight":case"slideLeft":switch(r=s.value,o=1-r,s.state){case 0:i=1-Math.sqrt(1-r*r);break;case 2:i=Math.sqrt(1-r*r)}switch(u=e.w,s.state){case 0:a=u*i;break;case 1:a=0;break;case 2:a=u*i-u;break;case 3:a=-u}"slideRight"==n.fade_type&&(a*=-1),t.x+=a}},n.postDrawFunction=function(e){var t,n=(e.ctx,this._fade);switch(n.state){case 0:t=n.tweenIn;break;case 2:t=n.tweenOut}if(void 0!=t)switch(t.fade_type){case"white":c(255,255,255,n.value);break;default:c(255,255,255,0)}},n},e.newImgElement=function(t){var n=f();return n.setImage(t),n.drawFunction=function(t,n){var r=t,o=n,i=this.imgFrame;i.update(),this.width=i.sw,this.height=i.sh;var a=o.scale,u=o.scale;this.mirror&&(a*=-1),this.flip&&(u*=-1),e.drawImgFrame(r.ctx,this.imgFrame,o.x,o.y,a,u,this.rotation)},n.defaultDraw=n.drawFunction,n},e.newImageElement=e.newImgElement,e.newStaticBgElement=function(t){var n=f(t);return n.drawFunction=function(n,r){var o=n,i=e.getImage(t);if(i.loaded){var a=!0,u=o.w,s=o.h,c=s>u!=a,l=640,f=960,d=o.ctx;d.save(),c?(d.translate(u,0),d.rotate(Math.PI/2),d.drawImage(i.img,0,0,l,f,0,0,s,u)):d.drawImage(i.img,0,0,l,f,0,0,u,s),d.restore()}},n.defaultDraw=n.drawFunction,n}},Tengu.modules.html=function(e){e.html_createRadioElement=function(e,t){var n='<input type="radio" name="'+e+'"';t&&(n+=' checked="checked"'),n+="/>";var r=document.createElement("div");return r.innerHTML=n,r.firstChild}},Tengu.modules.dom=function(e){if("undefined"==typeof window)return!1;var t,n,r,o=!1,i=!1;window.onload=function(){"undefined"==typeof t&&(t=document.createElement("div"),t.style.display="none",t.style.zIndex=-100,document.body.appendChild(t)),n=function(e){i&&console.log("Node Discarded"),t.appendChild(e),t.innerHTML=""},r=function(){var t=e.newElement();return t.destroy}()},e.logNodeDiscard=function(){i=!0},e.disableDOMScaling=function(e){void 0==e&&(e=!0),o=e},e.newDOMElement=function(t){var i=e.newElement(),a=e.getCanvasData(),u=a.overlay,s=document.createElement(t),c=!1;return i._domElement=s,s.style.position="absolute","onpropertychange"in s?s.attachEvent($.proxy(function(){"value"==event.propertyName&&i.onValueChange(s.value)},s)):s.addEventListener("input",function(){i.onValueChange(s.value)},!1),s.addEventListener("pointerdown",function(){void 0!=i.onClickAnywhere&&i.onClickAnywhere(),void 0!=i.onClick&&i.onClick()},!1),i.setText=function(e){s.innerHTML=e},i.destroy=function(){s&&n(s),r.call(i)},i.onValueChange=function(){},i.preDrawFunction=function(e,t){switch(s.style.left=t.x,s.style.top=t.y,s.style.width=i.width,s.style.height=i.height,s.style.zIndex=t.z,s.style.fontSize=i.fontSize*t.scale,s.style.visibility=i.visible?"visible":"hidden",this.halign){case"center":s.style.left=t.x-t.width/2;break;case"right":s.style.left=t.x-t.width}switch(this.valign){case"middle":s.style.top=t.y-t.height/2;break;case"bottom":s.style.top=t.y-t.height}c||(c=!0,u.appendChild(s)),o&&i.scaling_enabled||!o?(s.style.transform="scale("+t.scale+")",s.style.webkitTransform="scale("+t.scale+")",s.style.mozTransform="scale("+t.scale+")",s.style.oTransform="scale("+t.scale+")",s.style.msTransform="scale("+t.scale+")",s.style.left=t.x+-t.width*(1/t.scale)*.5+.05*t.x,s.style.top=t.y+-t.height*(1/t.scale)*.5+.05*t.y):("auto"!=s.style.width&&(s.style.width=t.width),"auto"!=s.style.height&&(s.style.height=t.height))},i.drawFunction=function(e){s.style.opacity=e.ctx.globalAlpha},i.getValue=function(){return s.value},i.getDOMElement=function(){return i._domElement},i.getDOMStyle=function(){return i._domElement.style},i.setDOMClass=function(e){i._domElement.className=e},i.setAlpha=function(e){i._domElement.opacity=e},i},e.newCheckboxElement=function(t){var n=e.newDOMElement("input"),r=n.getDOMElement();return r.type="checkbox",r.defaultChecked=t,r.onclick=function(){n.onValueChange(r.checked)},n.isChecked=function(){return r.checked},n.setChecked=function(e){r.checked=e},n},e.newTextElement=function(t){var n=e.newDOMElement("div"),r=n.getDOMElement(),o=n.preDrawFunction;return r.innerHTML=t,n.fontSize=30,n.textAlign="left",n.textVAlign="top",n.preDrawFunction=function(e,t){r.fontSize=n.fontSize*t.scale,r.style.textAlign=n.textAlign,r.style.verticalAlign=n.textVAlign,r.style.textAlign,o(e,t)},n.setText=function(e){r.innerHTML=e},n}},"undefined"!=typeof module&&(module.exports=Tengu);